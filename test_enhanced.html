<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Test Flashcards & Enhanced Highlighting - CE103</title>
    <link rel="stylesheet" href="css/flashcards.css">
    <!-- Prism.js for code highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-assembler.min.js"></script>
    <!-- MathJax for mathematical formulas -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background-color: #f0f2f5; }
        .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
        .test-section { margin: 30px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .nav-buttons { margin: 20px 0; text-align: center; }
        .nav-buttons a { 
            display: inline-block; 
            margin: 0 10px; 
            padding: 10px 20px; 
            background-color: #007bff; 
            color: white; 
            text-decoration: none; 
            border-radius: 5px; 
        }
        .nav-buttons a:hover { background-color: #0056b3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Test Enhanced Code Highlighting</h1>
        
        <div class="test-section">
            <h2>‚ú® Highlighting trong d·∫•u backtick</h2>
            <p>8051 s·ª≠ d·ª•ng l·ªánh `MOV A, #20H` ƒë·ªÉ t·∫£i gi√° tr·ªã immediate v√†o thanh ghi <code class="tech-term">ACC</code>.</p>
            <p>C√°c l·ªánh nh·∫£y nh∆∞ `JZ label` v√† `JNZ label` th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong v√≤ng l·∫∑p.</p>
            <p>Thanh ghi <code class="tech-term">DPTR</code> c√≥ th·ªÉ ƒë∆∞·ª£c t·∫£i b·∫±ng l·ªánh `MOV DPTR, #4000H`.</p>
        </div>

        <div class="test-section">
            <h2>üîß Highlighting thu·∫≠t ng·ªØ k·ªπ thu·∫≠t</h2>
            <p>Vi ƒëi·ªÅu khi·ªÉn 8051 c√≥ c√°c thanh ghi quan tr·ªçng nh∆∞ ACC, PSW, DPTR, PC, SP.</p>
            <p>B·ªô nh·ªõ bao g·ªìm ROM, RAM, v√† c√≥ th·ªÉ m·ªü r·ªông v·ªõi EEPROM.</p>
            <p>C√°c giao ti·∫øp nh∆∞ UART, SPI, I2C th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong embedded systems.</p>
            <p>C√°c ch·ª©c nƒÉng kh√°c bao g·ªìm PWM, ADC, DAC cho ƒëi·ªÅu khi·ªÉn analog.</p>
        </div>

        <div class="test-section">
            <h2>üî¢ Highlighting s·ªë v√† ƒë·ªãa ch·ªâ</h2>
            <p>ƒê·ªãa ch·ªâ 4000H trong b·ªô nh·ªõ, gi√° tr·ªã 0xFF, s·ªë binary 11010110B.</p>
            <p>Thanh ghi t·∫°i ƒë·ªãa ch·ªâ 80H, gi√° tr·ªã hex 0x1234, binary 10101010B.</p>
        </div>

        <div class="test-section">
            <h2>üìê Highlighting c√¥ng th·ª©c to√°n h·ªçc</h2>
            <p>Th·ªùi gian chu k·ª≥ m√°y ƒë∆∞·ª£c t√≠nh: T_machine = 12 / f_osc</p>
            <p>V·ªõi t·∫ßn s·ªë f_osc = 12MHz, ta c√≥ T_cycle = 1Œºs</p>
            <p>S·ªë l·ªánh th·ª±c hi·ªán: N_instructions = 1,000,000 l·ªánh/gi√¢y</p>
            
            <h3>C√¥ng th·ª©c MathJax:</h3>
            $$T_{machine} = \frac{12}{f_{osc}}$$
            <p>Khi $f_{osc} = 12MHz$, ta c√≥: $T_{machine} = 1\mu s$</p>
        </div>

        <div class="test-section">
            <h2>üíª Code Block Assembly</h2>
            <div class="question-with-code">
                <p>V√≠ d·ª• v·ªÅ ƒëo·∫°n m√£ assembly:</p>
                <div class="code-label">8051 Assembly Code</div>
                <div class="code-block">
                    <pre><code class="language-assembler">MOV A, #45H
MOV B, #F5H
MUL AB
DJNZ R0, loop
CJNE A, #20H, next</code></pre>
                </div>
                <p>ƒê√¢y l√† v√≠ d·ª• v·ªÅ syntax highlighting cho assembly code.</p>
            </div>
        </div>

        <div class="nav-buttons">
            <a href="index.html">üè† Trang ch·ªß</a>
            <a href="flashcards.html">üìö Flashcards M·ªõi</a>
            <a href="quiz.html">üìù Quiz</a>
            <a href="test_complete.html">üß™ Test Complete</a>
        </div>
    </div>
    
    <script>
        // Simulate the formatting function
        function formatCodeInText(text) {
            let formattedText = text;
            
            // Format backtick code
            formattedText = formattedText.replace(/`([^`]+)`/g, '<code class="inline-code-bright">$1</code>');
            
            // Highlight tech terms
            formattedText = formattedText.replace(
                /\b(ROM|RAM|EEPROM|UART|SPI|I2C|PWM|ADC|DAC|CPU|ALU|PC|SP|DPTR|ACC|PSW|IE|IP|TCON|TMOD|SCON|SBUF|TH0|TL0|TH1|TL1)\b/g,
                '<span class="tech-term">$&</span>'
            );
            
            // Highlight numbers
            formattedText = formattedText.replace(
                /\b(0x[0-9A-Fa-f]+|[0-9A-Fa-f]+[Hh]|[01]+[Bb])\b/g,
                '<span class="number-highlight">$&</span>'
            );
            
            // Highlight formula variables
            formattedText = formattedText.replace(
                /\b(T_machine|f_osc|T_cycle|N_instructions)\b/g,
                '<span class="formula-var">$&</span>'
            );
            
            return formattedText;
        }

        // Apply formatting to all paragraphs
        document.addEventListener('DOMContentLoaded', function() {
            const paragraphs = document.querySelectorAll('p');
            paragraphs.forEach(p => {
                if (!p.innerHTML.includes('<')) {
                    p.innerHTML = formatCodeInText(p.innerHTML);
                }
            });
            
            // Highlight code
            if (window.Prism) {
                Prism.highlightAll();
            }
            
            // Process math
            if (window.MathJax) {
                MathJax.typesetPromise().catch(function (err) {
                    console.log('MathJax error: ' + err.message);
                });
            }
        });
    </script>
</body>
</html>
